<!DOCTYPE html>
<html layout:decorate="~{layouts/site}">
<head>
<meta charset="UTF-8">
<title>Chi tiết sự kiện</title>
</head>
<body>
	<div layout:fragment="content">
		<div class="page-content bg-white">
			<div class="page-banner ovbl-dark"
				style="background-image: url(@{/assets/images/banner/banner1.jpg});">
				<div class="container">
					<div class="page-banner-entry">
						<h1 class="text-white"
							th:text="${suKien.danhMucSuKien.tenDanhMuc}">Courses Details</h1>
					</div>
				</div>
			</div>

			<div class="breadcrumb-row">
				<div class="container">
					<ul class="list-inline">
						<li><a href="@{/}">Trang chủ</a></li>
						<li><a th:href="@{/admin/sukien}" 	>Danh sách sự kiện</a></li>
						<li th:text="${suKien.tenSuKien}"></li>
					</ul>
				</div>
			</div>

			<div class="content-block">
				<div class="section-area section-sp1">
					<div class="container">
						<div class="row">
							<div class="col-lg-8 col-md-7 col-sm-12">
								<div class="courses-post">
									<div class="ttr-post-media media-effect">
										<a href="#"><img th:src="${suKien.anh}" alt=""></a>
									</div>
									<div class="ttr-post-info">
										<div class="ttr-post-title">
											<h2 class="post-title" th:text="${suKien.tenSuKien}">Tên
												sự kiện</h2>
										</div>
										<div class="ttr-post-text">
											<p th:utext="${suKien.moTa}">Mô tả sự kiện</p>
										</div>
									</div>
								</div>

								<div class="courese-overview" id="overview">
									<div class="row" th:utext="${suKien.noiDung}"></div>
								</div>
							</div>

							<div class="col-lg-4 col-md-5 col-sm-12 m-b30">
								<div class="bg-primary text-white contact-info-bx m-b30">
									<h2 class="m-b10 title-head">
										Hãy tham dự <span>Đừng bỏ qua</span>
									</h2>
									<p th:utext="${suKien.moTa}">Mô tả sự kiện ngắn</p>
									<div class="widget widget_getintuch">
										<ul>
											<li><i class="ti-location-pin"></i> <span
												th:text="${suKien.diaChi}">Địa chỉ sự kiện</span></li>
											<li><i class="ti-mobile"></i> <span
												th:text="${suKien.sdtHoTro}">SĐT hỗ trợ</span></li>
											<li><i class="ti-email"></i> <span
												th:text="${suKien.emailHoTro}">Email hỗ trợ</span></li>
											<li><button class="btn btn-primary">Đăng ký
													ngay</button></li>
										</ul>
									</div>
									<h5 class="m-t0 m-b20">Follow Us</h5>
									<ul class="list-inline contact-social-bx">
										<li><a href="#" class="btn outline radius-xl"><i
												class="fa fa-facebook"></i></a></li>
										<li><a href="#" class="btn outline radius-xl"><i
												class="fa fa-twitter"></i></a></li>
										<li><a href="#" class="btn outline radius-xl"><i
												class="fa fa-linkedin"></i></a></li>
										<li><a href="#" class="btn outline radius-xl"><i
												class="fa fa-google-plus"></i></a></li>
									</ul>
								</div>
								<iframe src="https://www.google.com/maps/embed?pb=!1m18!..."
									class="align-self-stretch d-flex"
									style="width: 100%; min-height: 400px;" allowfullscreen></iframe>
							</div>
						</div>

						<!-- DANH SÁCH THÀNH VIÊN THAM GIA -->
						<div class="participant-section mt-5">
							<h4>Danh sách thành viên tham gia sự kiện</h4>
							<table class="table table-striped table-bordered">
								<thead class="thead-dark">
									<tr>
										<th>#</th>
										<th>Họ tên</th>
										<th>Số điện thoại</th>
										<th>Email</th>
										<th>Lớp</th>
										<th>Hành động</th>
									</tr>
								</thead>
								<tbody>
									<tr th:each="thamGia, iterStat : ${danhSachThamGia}" >
										<td th:text="${iterStat.index + 1}">1</td>
										<td th:text="${thamGia.nguoiDung.hoTen}">Nguyễn Văn A</td>
										<td th:text="${thamGia.nguoiDung.SDT}">0123456789</td>
										<td th:text="${thamGia.nguoiDung.email}">email@example.com</td>
										<td th:text="${thamGia.nguoiDung.lop.tenLop}">CNTT1</td>
										<td>
											<!-- ✅ Nút xóa -->
											<form th:action="@{/admin/sukien/remove-member}"
												method="post"
												onsubmit="return confirm('Bạn có chắc muốn xóa thành viên này không?')">
												<input type="hidden" name="suKienId" th:value="${suKien.id}" />
												<input type="hidden" name="nguoiDungId"
													th:value="${thamGia.nguoiDung.id}" />
												<button type="submit" class="btn btn-danger btn-sm">
													<i class="fa fa-trash"></i> Xóa
												</button>
											</form>
										</td>
									</tr>
								</tbody>
							</table>
						</div>

						<!--<div class="mt-4">
							<a th:href="@{'/admin/events/update/' + ${suKien.id}}"  class="btn btn-primary">Chỉnh sửa</a>
							<a
								th:href="@{/admin/events}" class="btn btn-secondary">Quay
								lại</a>
							
								 
						</div>-->

						<form th:action="@{/admin/sukien/add-member}" method="post"
							class="mt-3" th:if="${showForm}">
							<input type="hidden" name="suKienId" th:value="${suKien.id}" />

							<div class="form-group">
								<label for="taiKhoan">Chọn người dùng</label> <select
									name="taiKhoan" class="form-control" required>
									<option value="">-- Chọn người dùng --</option>
									<option th:each="nguoiDung : ${nguoiDungList}"
										th:value="${nguoiDung.taiKhoan}"
										th:text="${nguoiDung.hoTen + ' (' + nguoiDung.taiKhoan + ')'}">
									</option>
								</select>
							</div>

							<button type="submit" class="btn btn-success mt-2">Thêm
								thành viên</button>
						</form>

					</div>
				</div>
			</div>

		</div>
	</div>
</body>
</html>
